<nav class="nav flex-column">
    {#if usuario.perfil == 'MASTER'}
        <a href="/dashboard/master" class="nav-link">
            <i class="bi bi-speedometer2"></i> Dashboard
        </a>
    {#else}
        <a href="/dashboard/advogado" class="nav-link">
            <i class="bi bi-grid-fill"></i> Dashboard
        </a>
    {/if}

    {#if usuario.perfil == 'MASTER'}
        <a href="/gestao-usuarios" class="nav-link">
            <i class="bi bi-people-fill"></i> Usuários
        </a>
    {/if}

    <a href="/clientes" class="nav-link">
        <i class="bi bi-person-badge-fill"></i> Clientes
    </a>
    <a href="/processos" class="nav-link">
        <i class="bi bi-folder2-open"></i> Processos
    </a>

    <a href="/agenda" class="nav-link">
        <i class="bi bi-calendar-date-fill"></i> Agenda
    </a>
    <a href="/video-chamada" class="nav-link">
        <i class="bi bi-camera-video-fill"></i> Video Chamada
    </a>

    {#if usuario.perfil == 'MASTER'}
        <a href="/auditoria" class="nav-link">
            <i class="bi bi-shield-check"></i> Auditoria
        </a>
    {/if}
</nav>

<div class="mt-auto">
    <hr class="mx-3">
    <a href="/perfil" class="nav-link">
        <i class="bi bi-person-gear"></i> Meu Perfil
    </a>
    <a href="/login/logout" class="nav-link">
        <i class="bi bi-box-arrow-right"></i> Sair
    </a>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const currentPath = window.location.pathname;
        const navLinks = document.querySelectorAll('.sidebar .nav-link');

        navLinks.forEach(link => {
            const href = link.getAttribute('href');

            // Lógica:
            // 1. Se for a página exata (ex: /processos) -> Ativa
            // 2. Se estiver dentro da seção (ex: /processos/detalhe/1) -> Ativa também
            if (href === currentPath || (href !== '/' && currentPath.startsWith(href))) {
                link.classList.add('active');
            }
        });
    });
</script>